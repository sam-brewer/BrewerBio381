---
title: "Homework 11"
author: "Sam Brewer"
date: "4/6/2022"
output: html_document
---

Code to condense the data in files produced by the Lachat analysis instrument. Remove unnecessary columns, leaving run date, sample IDs, and concentration values and units. New condensed data is saved to a new file.

```{r}
library(dplyr)
library(tidyverse)
install.packages("janitor")
library(janitor)

file_folder <- "Bio381Data/"
n_files <- 4
file_out <- "Bio381DataCondensed.csv"

file_names <- list.files(path=file_folder)

for (i in seq_along(file_names)) {
  data <- read.table(file=paste(file_folder,file_names[i],sep=""),
                     sep=",",
                     header=TRUE,
                     stringsAsFactors = FALSE)
  
  data <- data %>%
    clean_names() %>%
    rename(p_peak_concentration=data[,8],
           p_concentration_units=data[,9],
           n_peak_concentration=data[,13],
           n_concentration_units=data[,14] ) %>%
    select(sample_id, detection_date, peak_concentration, concentration_units, peak_concentration, concentration_units) 
  print(data)
  # #write.table(x=data,
  #           file=file_out,
  #           row.names=FALSE,
  #           col.names=TRUE,
  #           sep=",",
  #           append=TRUE)
}

df <- read.table(paste(file_folder,file_names[1],sep=""),
                     sep=",",
                     header=TRUE,
                     stringsAsFactors = FALSE)

df<- df %>%
    clean_names() 

names(df)[8] <-"p_peak_concentration"
names(df

```
